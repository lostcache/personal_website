---
---

<div class="giscus-container">
    <script
        src="https://giscus.app/client.js"
        data-repo="lostcache/personal_website"
        data-repo-id="R_kgDOQqBKag"
        data-category="Announcements"
        data-category-id="DIC_kwDOQqBKas4Cz5Ft"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        crossorigin="anonymous"
        async
    ></script>
</div>

<style>
    .giscus-container {
        margin-top: 3em;
        padding-top: 2em;
        border-top: 1px solid rgb(var(--gray-light));
    }
</style>

<script>
    // Sync giscus theme with our custom theme toggle
    function setGiscusTheme(theme) {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (iframe) {
            iframe.contentWindow?.postMessage(
                {
                    giscus: {
                        setConfig: {
                            theme: theme === 'dark' ? 'dark' : 'light'
                        }
                    }
                },
                'https://giscus.app'
            );
        }
    }

    // Update giscus theme when our theme changes
    const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
            if (mutation.attributeName === 'data-theme') {
                const theme = document.documentElement.getAttribute('data-theme');
                setGiscusTheme(theme || 'light');
            }
        });
    });

    observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['data-theme']
    });

    // Set initial theme when giscus loads
    window.addEventListener('message', (event) => {
        if (event.origin !== 'https://giscus.app') return;
        if (event.data.giscus?.discussion) {
            const theme = document.documentElement.getAttribute('data-theme');
            setGiscusTheme(theme || 'light');
        }
    });
</script>
